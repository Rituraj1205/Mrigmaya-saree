import{r as n,A as T,u as I,i as b,j as e,d as W,z as l,b as D}from"./index-1ccc8524.js";import{B as V}from"./BrandLoader-d61dd23e.js";const z=`${W}/auth/google`,U=(r,o="")=>D(r,o),x={PASSWORD:"password",REGISTER:"register"},$=({mode:r,setMode:o,tabs:p})=>e.jsx("div",{className:"flex flex-wrap gap-3",children:p.map(i=>e.jsx("button",{type:"button",onClick:()=>o(i.key),className:`px-4 py-2 rounded-full text-sm font-semibold transition-all border ${r===i.key?"bg-[var(--primary)] text-[var(--surface)] border-transparent shadow":"bg-[var(--surface)]/80 text-[var(--muted)] border-[var(--border)]"}`,children:i.label},i.key))}),m=r=>e.jsx("input",{...r,className:`w-full rounded-2xl border border-[var(--border)] bg-[var(--surface)]/80 px-4 py-3 text-[var(--ink)] placeholder-[var(--muted)] focus:outline-none focus:ring-2 focus:ring-[var(--primary)]/60 ${r.className||""}`}),k=({item:r})=>{const o=U((r==null?void 0:r.image)||"","");return!r||!o?null:e.jsxs("div",{className:"hidden md:block rounded-3xl overflow-hidden glass-panel border border-[var(--border)] shadow-2xl relative h-[320px] w-[220px] flex-shrink-0",style:{backgroundImage:`linear-gradient(160deg, rgba(0,0,0,0.5), rgba(0,0,0,0.25)), url(${o})`,backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/65 via-transparent to-transparent"}),e.jsxs("div",{className:"absolute bottom-4 left-4 right-4 text-white space-y-1",children:[e.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-white/70",children:r.subtitle}),e.jsx("p",{className:"text-lg font-semibold",children:r.title})]})]})};function F(){const{login:r}=n.useContext(T),[o,p]=n.useState(x.PASSWORD),[i,f]=n.useState(""),[h,C]=n.useState(""),[w,P]=n.useState(""),[d,j]=n.useState(""),[y,E]=n.useState(""),[v,A]=n.useState([{title:"",subtitle:"",image:""},{title:"",subtitle:"",image:""}]),N=I();n.useEffect(()=>{b.get("/home-sections").then(a=>{const c=(a.data||[]).filter(s=>{var t;return s.group==="custom"&&((t=s.meta)==null?void 0:t.loginSlot)!==void 0&&s.active!==!1}).sort((s,t)=>{var g,u;return(((g=s.meta)==null?void 0:g.loginSlot)??0)-(((u=t.meta)==null?void 0:u.loginSlot)??0)});if(c.length){const s=[0,1].map(t=>c.find(g=>{var u;return Number((u=g.meta)==null?void 0:u.loginSlot)===t})||{});A(t=>s.map((g,u)=>({...t[u],...g})))}}).catch(()=>{})},[]);const S=()=>{const a=i.trim();return!a||!a.includes("@")?(l.error("Please enter a valid email"),null):a},R=async()=>{var c,s;const a=S();if(a){if(!d)return l.error("Enter your password");try{const t=await b.post("/auth/login-password",{email:a,password:d});r(t.data.token,t.data.user),l.success("Logged in"),N("/")}catch(t){l.error(((s=(c=t.response)==null?void 0:c.data)==null?void 0:s.msg)||"Login failed")}}},_=async()=>{var c,s;const a=S();if(a){if(!h.trim())return l.error("Please enter your name");if(!d)return l.error("Please set a password");if(d.length<6)return l.error("Password must be at least 6 characters");if(d!==y)return l.error("Passwords do not match");try{const t=await b.post("/auth/register",{email:a,name:h.trim(),password:d,mobile:w.trim()||void 0});r(t.data.token,t.data.user),l.success("Account created"),N("/")}catch(t){l.error(((s=(c=t.response)==null?void 0:c.data)==null?void 0:s.msg)||"Could not create account")}}},L=[{key:x.PASSWORD,label:"Login"},{key:x.REGISTER,label:"Create Account"}],O=v[0],G=v[1]||v[0];return e.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-[var(--bg)] via-[var(--surface-muted)] to-[var(--bg)] text-[var(--ink)] overflow-hidden flex items-center justify-center px-4 py-12",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_15%_15%,rgba(127,31,109,0.16),transparent_40%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_80%_10%,rgba(43,140,127,0.14),transparent_45%)]"}),e.jsx("div",{className:"absolute -left-16 top-10 h-40 w-40 rounded-full bg-[var(--primary-soft)] blur-3xl opacity-70 brand-floating"}),e.jsx("div",{className:"absolute right-0 top-24 h-32 w-32 rounded-full bg-[var(--accent)] blur-3xl opacity-50 brand-floating"}),e.jsxs("div",{className:"relative w-full max-w-6xl flex items-center justify-center gap-6",children:[e.jsx(k,{item:O}),e.jsxs("div",{className:"relative w-full max-w-3xl glass-panel rounded-[32px] border border-[var(--border)] p-8 lg:p-10 shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"absolute -right-16 -top-16 h-44 w-44 rounded-full bg-[var(--primary)]/18 blur-3xl brand-pulse"}),e.jsx("div",{className:"absolute left-6 top-8 h-20 w-20 rounded-full bg-[var(--accent)]/18 blur-3xl"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-6 text-center",children:[e.jsx(V,{message:"Surat couture drapes"}),e.jsxs("div",{className:"w-full max-w-lg text-left",children:[e.jsx($,{mode:o,setMode:p,tabs:L}),o===x.PASSWORD&&e.jsxs("div",{className:"space-y-3 mt-4",children:[e.jsx("p",{className:"text-sm text-[var(--muted)]",children:"Use your email and password."}),e.jsx(m,{type:"email",value:i,onChange:a=>f(a.target.value),placeholder:"you@example.com"}),e.jsx(m,{type:"password",value:d,onChange:a=>j(a.target.value),placeholder:"Password"}),e.jsx("button",{onClick:R,className:"w-full bg-gradient-to-r from-[var(--primary)] to-[var(--accent)] text-[var(--surface)] font-semibold rounded-2xl py-3 shadow-md hover:shadow-lg transition",children:"Login"})]}),o===x.REGISTER&&e.jsxs("div",{className:"space-y-3 mt-4",children:[e.jsx("p",{className:"text-sm text-[var(--muted)]",children:"Create an account with email, phone, and password."}),e.jsx(m,{type:"text",value:h,onChange:a=>C(a.target.value),placeholder:"Full name"}),e.jsx(m,{type:"tel",value:w,onChange:a=>P(a.target.value),placeholder:"Phone (optional)"}),e.jsx(m,{type:"email",value:i,onChange:a=>f(a.target.value),placeholder:"you@example.com"}),e.jsx(m,{type:"password",value:d,onChange:a=>j(a.target.value),placeholder:"Create password (min 6 characters)"}),e.jsx(m,{type:"password",value:y,onChange:a=>E(a.target.value),placeholder:"Confirm password"}),e.jsx("button",{onClick:_,className:"w-full bg-gradient-to-r from-[var(--primary)] to-[var(--accent)] text-[var(--surface)] font-semibold rounded-2xl py-3 shadow-md hover:shadow-lg transition",children:"Create account"})]}),e.jsxs("div",{className:"pt-4 border-t border-[var(--border)] space-y-2",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-[var(--muted)]",children:"Or"}),e.jsx("a",{href:z,className:"w-full inline-flex items-center justify-center gap-2 rounded-full border border-[var(--border)] bg-white/80 px-4 py-3 text-sm font-semibold text-gray-800 hover:shadow transition",children:"Sign in with Google"}),e.jsx("p",{className:"text-xs text-[var(--muted)]",children:"Use a Google account listed as a Test user on the OAuth consent screen."})]})]})]})]}),e.jsx(k,{item:G})]})]})}export{F as default};
